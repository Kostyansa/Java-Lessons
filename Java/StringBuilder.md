## Класс StringBuilder
Объекты класса `String` являются неизменными, поэтому частая их модификация приводит к созданию новых объектов, что в свою очередь приводит к расходу памяти. Для решения этой проблемы были созданы классы `java.lang.StringBuffer` и `java.lang.StringBuilder`, которые позволяют более эффективно работать над модификацией строки.

Оба класса имеют сходные операции со `String`, объекты этих классов представляют собой последовательности символов, которые могут расширяться и модифицироваться.

Класс `StringBuffer` потокобезопасный, но менее эффективный по скорости чем `StringBuilder`.

## Понятие ёмкости(capacity)
Понятие ёмкости (capacity) в контексте классов `StringBuilder` и `StringBuffer` в Java относится к объему памяти, который резервируется для хранения символьных данных.
- **Начальная ёмкость**: По умолчанию, когда создается объект `StringBuilder` или `StringBuffer`, для него резервируется память, способная вместить 16 символов, не считая место для терминального нулевого символа, который обозначает конец строки.
- **Динамическое расширение**: Если при добавлении новых символов в строку текущая ёмкость оказывается недостаточной, классы автоматически увеличивают её размер. Это происходит за счет создания нового массива символов большего размера и копирования в него содержимого из старого массива.
- **Фактор расширения**: Размер новой ёмкости обычно рассчитывается как (старая ёмкость * 2) + 2, хотя это может варьироваться в зависимости от реализации JVM.
![[Pasted image 20231209012938.png]]
### Создание строки StringBuffer / StringBuilder
```java
// Создание пустой строки, capacity = 16
StringBuffer strB1 = new StringBuffer();

// Создание непустой строки, capacity = длина строки + 16 
StringBuffer strB2 = new StringBuffer("Глазов");

// Инициализация другой строки
StringBuffer strB3 = new StringBuffer(strB2);

// Явное указание capacity
StringBuffer strB4 = new StringBuffer(50);
```

### Пример создания и изменения объектов класса StringBuilder
```java
StringBuilder s = new StringBuilder(""); // Пустая строка

System.out.println("Строка = " + s + ", длина = " + s.length() + ", емкость = " + s.capacity());

s.append("Умпуруксой"); // Добавили строку "Умпуруксой"
System.out.println("Строка = " + s + ", длина = " + s.length() + ", емкость = " + s.capacity());

s.append(" университет"); // Добавили строку " университет"
System.out.println("Строка = " + s + ", длина = " + s.length() + ", емкость = " + s.capacity());
```

### Консоль:
```
Строка = , длина = 0, емкость = 16
Строка = Умпуруксой, длина = 10, емкость = 16
Строка = Умпуруксой университет, длина = 22, емкость = 34
```

## Некоторые методы обработки строк StringBuilder / StringBuffer

| №  | Методы                         | Описание                                             |
|----|--------------------------------|------------------------------------------------------|
| 1  | StringBuffer append(String str) | Присоединяет аргумент str к строке                    |
| 2  | StringBuffer delete(int start, int end) | Удаляет из строки символы от start до end            |
| 3  | int indexOf(String str)         | Возвращает индекс первого вхождения подстроки        |
| 4  | StringBuffer insert(int offset, String str) | Вставка в строку строки str в позицию offset          |
| 5  | int length()                    | Возвращает длину строки                              |
| 6  | StringBuffer reverse()          | Переворачивает строку                                |
| 7  | StringBuffer substring(int start, int end) | Возвращает подстроку от start до end                 |
| 8  | и другие                        |                                                      |

### Пример использования StringBuffer:
```java
StringBuffer s = new StringBuffer("Ижевск столица"); // Исходная строка s
System.out.println(s);

s.append(" Удмуртии");                               // Добавили к строке "Удмуртии"
System.out.println(s);

s.delete(s.indexOf("Ижевск"), "Ижевск".length());    // Удалили слово "Ижевск"
System.out.println(s);
 
s.insert(0, "Главой ");                              // Вставили слово "Главой" в начало
System.out.println(s);  

s.insert(s.indexOf("столица"), "республики ");       // Вставили "республики" перед "столица"
System.out.println(s);
```

### Консоль:
```
Ижевск столица
Ижевск столица Удмуртии
столица Удмуртии
Главой столица Удмуртии
Главой республики столица Удмуртии
```
